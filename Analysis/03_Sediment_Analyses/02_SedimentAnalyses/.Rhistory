setwd("~/Work/Projects/TannerCrab_SBS_SelectivityAnalysis/Analysis/04b_SedimentAnalyses")
source('~/Work/Projects/TannerCrab_SBS_SelectivityAnalysis/Analysis/04b_SedimentAnalyses/plotSedRasters.R')
#--plot sediment rasters
require(ggplot2)
#--map phi
p_phi = ggplot()+
geom_stars(data=rasters[[1]])+
#        geom_sf(data=dfrHD,mapping=aes_string(fill="phi"),shape=21)+
scale_fill_viridis_c(option="plasma")+
labs(fill="phi");
print(p_phi);
require(stars);
p_phi = ggplot()+
geom_stars(data=rasters[[1]])+
#        geom_sf(data=dfrHD,mapping=aes_string(fill="phi"),shape=21)+
scale_fill_viridis_c(option="plasma")+
labs(fill="phi");
print(p_phi);
basemap = wtsGIS::gg_CreateBasemapLayers(final.crs = crs);
print(basemap)
bmls = wtsGIS::gg_CreateBasemapLayers(final.crs = crs);
ggplot()+bmls$land+bmls$theme+bmls$map_scale;
p_phi = ggplot()+
geom_stars(data=rasters[[1]])+
#        geom_sf(data=dfrHD,mapping=aes_string(fill="phi"),shape=21)+
bmls$land +
scale_fill_viridis_c(option="plasma")+
labs(fill="phi") +
bmls$theme;
print(p_phi);
p_phi = ggplot()+
geom_stars(data=rasters[[1]])+
#        geom_sf(data=dfrHD,mapping=aes_string(fill="phi"),shape=21)+
bmls$land +
scale_fill_viridis_c(option="plasma")+
labs(fill="phi") +
bmls$scale +
bmls$theme;
print(p_phi);
bbox = sf::st_bbox(rasters[[1]]);
p_phi = ggplot()+
geom_stars(data=rasters[[1]])+
#        geom_sf(data=dfrHD,mapping=aes_string(fill="phi"),shape=21)+
bmls$land +
scale_fill_viridis_c(option="plasma")+
labs(fill="phi") +
bmls$map_scale +
bmls$theme;
print(p_phi);
sgls = tcsamSurveyData::gisGetSurveyGridLayers();
View(sgls)
wtsGIS::gg_CreateBasemapLayers
bmls = wtsGIS::gg_CreateBasemapLayers(final.crs = crs,bbox=bbox);
ggplot()+bmls$land+bmls$theme+bmls$map_scale;
p_phi = ggplot()+
geom_stars(data=rasters[[1]])+
#        geom_sf(data=dfrHD,mapping=aes_string(fill="phi"),shape=21)+
bmls$land +
geom_sf(data=sgls$grid,fill=NA,color="black") +
scale_fill_viridis_c(option="plasma")+
labs(fill="phi") +
bmls$map_scale +
bmls$theme;
print(p_phi);
ggsave("./Figures/fig01_MapPhi.png",p_phi,device="png",width=7.75,height=6.5,units="in");
#--map sorting
p_srt = ggplot()+
geom_stars(data=rasters[[2]])+
#        geom_sf(data=dfrHD,mapping=aes_string(fill="phi"),shape=21)+
bmls$land +
geom_sf(data=sgls$grid,fill=NA,color="black") +
scale_fill_viridis_c(option="plasma")+
labs(fill="sorting") +
bmls$map_scale +
bmls$theme;
print(p_srt);
ggsave("./Figures/fig02_MapSorting.png",p_srt,device="png",width=7.75,height=6.5,units="in");
